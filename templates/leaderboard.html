{% extends "layout.html" %}


{% block main %}

<h1>Leaderboards</h1>
<div id="leaderboard">
  <table class="table table-striped">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Rank</th>
        <th scope="col">Username</th>
        <th scope="col">Score</th>
        <th scope="col">Date</th>
      </tr>
    </thead>
    <tbody>

      {% for score in scores %}
      <tr>
        <td> {{score.position}} </td>
        <td> {{score.username}} </td>
        <td> {{score.score}} </td></td>
        <td> {{score.date}} </td>
      </tr>
      {% endfor %}

    </tbody>
  </table>

</div>

<div class = "btn-group">
  <form action="/" method="get">
      <button type="submit" class="btn btn-info">Home</button>
  </form>

  <form action="/quiz" method="get">
      <button type="submit" class="btn btn-primary"> {{played}} </button>
  </form>

  <form action="/barchart" method="get">
      <button id="results" type="submit" class="btn btn-primary">Detailed results</button>
  </form>

  <form action="/delete_username" method="get">
      <button id="delete-score" type="submit" class="btn btn-danger">Delete your score</button>
  </form>
</div>


<script>
  // hide 'delete username' button when loading page
  document.getElementById('delete-score').style.display = "none";
  document.getElementById('results').style.display = "none";

  // Fetch outcome of backend check for session
  fetch('/deletebutton_display')
    .then((response) => {
      return response.json();
    })

    // if outcome is True (session exists) display button
    .then((truefalse) => {
    console.log(truefalse)
    if (truefalse == true){
      document.getElementById('delete-score').style.display = "block";
      document.getElementById('results').style.display = "block";
    }
    })


</script>
{% endblock %}
