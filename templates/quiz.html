{% extends "layout.html" %}


{% block main %}

<html lang="en">
    <p><center>Quiz</center></p>

    <center><p id = "question"></p></center>
    <p id='time'></p>
    <div>
      <center><p><button id='answer1' type="button" class="btn btn-primary" onclick='check(this.innerHTML)'></button></p></center>
      <center><p><button id='answer2' type="button" class="btn btn-succes" onclick='check(this.innerHTML)'></button></p></center>
      <center><p><button id='answer3' type="button" class="btn btn-info" onclick='check(this.innerHTML)'></button></p></center>
      <center><p><button id='answer4' type="button" class="btn btn-warning" onclick='check(this.innerHTML)'></button></p></center>
    </div>

</html>

<script>
var score = 0;
var timer = 61;
var correct_answer;
function check(input) {
  if (input == correct_answer) {
  score++;
  timer = timer + 1;
  }
}
function addSecond() {
  timer--;
  document.getElementById('time').innerHTML = timer;

}
setInterval(addSecond, 1000);

fetch('https://opentdb.com/api.php?amount=1&category=9') // request api
  .then((response) => {
    return response.json();
  })

  .then((data) => {
    Question = data.results[0];
    correct_answer = Question.correct_answer;
    window.correct_answer = correct_answer;
    let answers = Question.incorrect_answers; // creates an array with all the anwers correct and incorrect
    answers.push(Question.correct_answer);

    // sort True/False question as True, False
    if (answers.length == 2) {
      answers.sort();
      answers.reverse();
    }
    // randomize multiple choice questions
    else {
    answers.sort(() => Math.random() - 0.5);
    }

    // displaying question and answers
    document.getElementById('question').innerHTML = Question.question;
    document.getElementById('answer1').innerHTML = answers[0];
    document.getElementById('answer2').innerHTML = answers[1];

    if (answers.length == 2) { // remove the 3rd and 4th button if True/False question
    document.getElementById('answer3').style.display = "none";
    document.getElementById('answer4').style.display = "none";
    }

    else {
    document.getElementById('answer3').innerHTML = answers[2];
    document.getElementById('answer4').innerHTML = answers[3];
    }

  });

</script>

{% endblock %}